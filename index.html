<html>

<head>
    <title>Tic Tac Toe</title>
    <style>
        h1 {
            text-align: center;
        }

        td {
            width: 150px;
            height: 150px;

            cursor: pointer;

            text-align: center;
            font-size: 120px;
        }

        #message {
            text-align: center;
        }

        #grid {
            margin: 0 auto;
        }

        #grid td {
            border: 1px solid black;
        }

        #restart {
            text-align: center;
        }
    </style>
</head>

<body>
    <h1>Tic Tac Toe</h1>
    <p id="message"></p>
    <table id="grid">
        <tbody>
            <tr>
                <td onclick="makeMove(this)"></td>
                <td onclick="makeMove(this)"></td>
                <td onclick="makeMove(this)"></td>
            </tr>
            <tr>
                <td onclick="makeMove(this)"></td>
                <td onclick="makeMove(this)"></td>
                <td onclick="makeMove(this)"></td>
            </tr>
            <tr>
                <td onclick="makeMove(this)"></td>
                <td onclick="makeMove(this)"></td>
                <td onclick="makeMove(this)"></td>
            </tr>
        </tbody>
    </table>

    <p id="restart">
        <button onclick="restartGame()" type="button">Restart game</button>
    </p>

    <script>
        var PlayerX = 'X';
        var PlayerO = 'O';
        var currentPlayer = PlayerX;

        var winner = '';

        var startGame = function () {
            setMessage('Game started. Current player is ' + currentPlayer);
        };

        var setMessage = function (message) {
            document.getElementById('message').innerText = message;
        };

        var makeMove = function (element) {
            element.onclick = null;
            element.innerText = currentPlayer;

            if (checkMove()) {
                return;
            }

            switchPlayer();
            setMessage('Current player is ' + currentPlayer);
        };

        var checkMove = function () {
            var elements = document.getElementsByTagName('tr');

            if (checkWin(elements)) {
                winner = currentPlayer;
                endGame();

                return true;
            }

            if (checkFull(elements)) {
                endGame();

                return true;
            }

            return false;
        };

        var checkWin = function (elements) {

            return false;

            // checkRows();
            // checkColumns();
            // checkDiagonal();
        };

        var checkFull = function (elements) {
            for (var i = 0; i < 3; i++) {
                for (var j = 0; j < 3; j++) {
                    if (!elements[i].children[j].innerText) {
                        return false;
                    }
                }
            }

            return true;
        };

        var switchPlayer = function () {
            if (currentPlayer == PlayerX) {
                currentPlayer = PlayerO;
            } else {
                currentPlayer = PlayerX;
            }
        };

        var endGame = function () {
            // TODO: block grid
            if (winner) {
                setMessage('Winner is ' + winner);
            } else {
                setMessage('Draw');
            }
        };

        var restartGame = function () {
            location.reload();
        };

        (function () {
            startGame();
        })();
    </script>
</body>

</html>
